<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>List</title>
        <!--ajax-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <!--CSS-->
        <link rel="stylesheet" href="general_css.css">
        <!--Header-->
        <%- include('../partials/header'); %>
    </head>
    <style>
    table {
        border-collapse: collapse;
        border: 2px solid rgb(140, 140, 140);
        width: 95%;
    }
    th, td {
        border-collapse: collapse;
        border: 2px solid rgb(140, 140, 140);
        text-align: center;
    }
    #table_container {
        width: 100%;
        display: flex;
        justify-content: center;
    }
    #td_button_container {
        display: grid;
        grid-template-columns: auto auto auto;
        gap: 10px;
    }
    #td_button_container>div {
        padding: 10px;
        transition: transform 0.2s; /* Smooth transition for scaling */
    }
    #td_button_container>div>button {
        border: none;
        padding: 5px; /* Increase padding for better appearance */
        cursor: pointer;
        width: 100%; /* Ensure buttons take full div width */
        transition: 0.35s;
        border-radius: 10px;
    }
    #td_button_container>div>button:hover {
        transform: scale(1.1); /* Scale up the button on hover */
        box-shadow: 3px 3px 10px black;
    }
    #td_button_container>div>.delete {
        background-color: red;
        color: white;
    }
    #td_button_container>div>.block {
        background-color: rgb(71, 71, 71);
        color: white;
    }
    #td_button_container>div>.view {
        background-color: rgb(110, 152, 231);
        color: white;
    }
    </style>
    <body>
        <div class="has_sidebar">
            <%- include('../partials/sidebar_admin'); %>
            <div>
                <h1 id="list_header"></h1>
                <div>Tottal Number Of <span id="span_number_of">companys</span> : <%=list_items.length%></div>
                <div id="table_container">
                    <table>
                          <thead>
                            <tr>
                                <th>A/A</th>
                                <% column_titles.forEach(function(column_title, index) { %>
                                    <th><%=column_title%></th>
                                <% });%>
                                <th></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                                <%if(list_items.length == 0){%>
                                    <td>-</td>
                                    <td>-</td>
                                    <td>-</td>
                                    <td>-</td>
                                <%}
                                else{
                                    list_items.forEach(function(list_item, index) { %>
                                        <tr>
                                            <td><%= index + 1 %></td>
                                            <% for (let key in list_item.data) { %>
                                                <td><%= list_item.data[key] %></td>
                                            <% } %>
                                            
                                            <td>
                                                <div id="td_button_container">
                                                    <div><button class="view">View</button></div>
                                                    <div><button class="delete">Delete</button></div>
                                                    <div><button class="block">Block</button></div>
                                                </div>
                                            </td>

                                        </tr>
                                    <% });
                                }%>

                            </tr>
                          </tbody>
                    </table>
                </div>
                <button id="back_btn">Πίσω</button>
            </div>
        </div>
        
    </body>
    <%- include('../partials/footer'); %>
    <script>
    $(document).ready(function(){
        var  searchfor = '';
        if (window.location.search) {
            searchfor = new URLSearchParams(window.location.search).get('searchfor');
            if(searchfor =='companys'){
                $("#list_header").html('Companys List');
                $("#span_number_of").html('companys');
            }
            if(searchfor =='users'){
                $("#list_header").html('Users List');
                $("#span_number_of").html('users');
            }
        }
        
        $("#back_btn").click(function(){
            window.location ="/";
        });

        
    });
    
    </script>
</html>
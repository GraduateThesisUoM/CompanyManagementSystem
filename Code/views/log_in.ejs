<!DOCTYPE html>
<html>
    <head>
        <title>Σύνδεση</title>
        <!--ajax-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <!--CSS-->
        <link rel="stylesheet" href="general_css.css">
    </head>
    <body>
      <% if (messages.error) { %>
        <%= messages.error %>
      <% } %>
      <a href="http://localhost:3000/log-in?fast_log_in=1">ad1</a>
        <a href="http://localhost:3000/log-in?fast_log_in=2">C1 </a>
        <a href="http://localhost:3000/log-in?fast_log_in=3">C3 3</a>
        <a href="http://localhost:3000/log-in?fast_log_in=4">ac1@ac1</a>
        <a href="http://localhost:3000/log-in?restartdb=true">restart db</a>

         <form class="display_block" action="/log-in" method="POST" >
            <h1>Σύνδεση</h1>
            <label for="email">Email</label>
            <input type="text" id="email" placeholder="email" name="email" required>
            <label for="password">Κωδικός</label>
            <input type="password" id="password" name="password" placeholder="Κωδικός" required>
            <div class="checkbox_conatainer">
              <input type="checkbox" id="showpasswordcheckbox">
              <label for="showpasswordcheckbox">Εμφάνηση Κωδικού</label>
            </div>
            <button id='log_in_btn' type="submit">Σύνδεση</button>
            
        </form>
        <button id="sign_up_btn">Εγγραφή</button>
        <button id="forgot_passsword_btn">Ξέχασα τον Κωδικό μου</button>
    </body>
  <script>
    $(document).ready(function(){
      //window.location = '/log-in?fast_log_in=4'
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has('message')) {
        if(urlParams.get('message')=="deletecomplete"){
          alert("Η διαγραφή του λογαριασμού σας ολοκληρόθηκε με επιτιχεία");
        }
        else if(urlParams.get('message')=="success_sign_up"){
          alert("Sign Up Completed Successfully");
        }
      }
      //test
      else if (urlParams.has('fast_log_in')) {
        if(urlParams.get('fast_log_in')=="1"){
          $("#email").val("ad1@ad1");
          $("#password").val("1");
          $("#log_in_btn").click();
        }
        else if(urlParams.get('fast_log_in')=="2"){
          $("#email").val("c1@c1");
          $("#password").val("1");
          $("#log_in_btn").click();
        }
        else if(urlParams.get('fast_log_in')=="4"){
          $("#email").val("ac1@ac1");
          $("#password").val("1");
          $("#log_in_btn").click();
        }
        else {
          $("#email").val("c"+urlParams.get('fast_log_in')+"@c"+urlParams.get('fast_log_in'));
          $("#password").val("1");
          $("#log_in_btn").click();
        }
      }
      
      $("#sign_up_btn").click(function(){
        window.location ="sign-up"
      });
      $("#forgot_passsword_btn").click(function(){
        window.location ="forgot-password"
      });
      $("#showpasswordcheckbox").click(function(){
        const passwordInput = $("#password");
        const isChecked = $(this).prop("checked");
        passwordInput.prop("type", isChecked ? "text" : "password");
      });
    });
  </script>
</html>
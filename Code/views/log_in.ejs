<!DOCTYPE html>
<html>
    <head>
        <title>Σύνδεση</title>
        <!--ajax-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <!--CSS-->
        <link rel="stylesheet" href="general_css.css">
        <link rel="stylesheet" href="log_in_css.css">
        <link rel="stylesheet" href="fonts_css.css">

        <!--Fonts-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Asap+Condensed:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&family=Poiret+One&family=Sofia+Sans:ital,wght@0,1..1000;1,1..1000&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    </head>
    <body>
      <% if (messages.error) { %>
        <%= messages.error %>
      <% } %>

         <div id="log_in_container">
          <!--a href="http://localhost:3000/log-in?fast_log_in=1">ad1</a><br>
          <a href="http://localhost:3000/log-in?fast_log_in=2">C1 </a><br>
          <a href="http://localhost:3000/log-in?fast_log_in=3">C3 3</a><br>
          <a href="http://localhost:3000/log-in?fast_log_in=4">ac1@ac1</a><br-->
          <form class="display_block asap-condensed-regular" action="/log-in" method="POST" >
            <h1>Log in</h1>
            <label for="email">Email</label>
            <input type="text" id="email" placeholder="myemail@domain.com" name="email" required>
            <label for="password">Password</label>
            <input type="password" id="password" name="password" placeholder="Password" required>
            <div class="checkbox_conatainer">
              <input type="checkbox" id="showpasswordcheckbox">
              <label  for="showpasswordcheckbox">Show password</label>
            </div>
            <button id='log_in_btn' type="submit">Log in</button>
            
        </form>
        <button id="sign_up_btn">Sign Up</button>
        <button id="forgot_passsword_btn">Forgot my password</button>
         </div>
    </body>
  <script>
    $(document).ready(function(){
      //window.location = '/log-in?fast_log_in=4'
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has('message')) {
        if(urlParams.get('message')=="deletecomplete"){
          alert("Η διαγραφή του λογαριασμού σας ολοκληρόθηκε με επιτιχεία");
        }
        else if(urlParams.get('message')=="success_sign_up"){
          alert("Sign Up Completed Successfully");
        }
      }
      //test
      else if (urlParams.has('fast_log_in')) {
        if(urlParams.get('fast_log_in')=="1"){
          $("#email").val("ad1@ad1");
          $("#password").val("1");
          $("#log_in_btn").click();
        }
        else if(urlParams.get('fast_log_in')=="2"){
          $("#email").val("c1@c1");
          $("#password").val("1");
          $("#log_in_btn").click();
        }
        else if(urlParams.get('fast_log_in')=="4"){
          $("#email").val("ac1@ac1");
          $("#password").val("1");
          $("#log_in_btn").click();
        }
        else {
          $("#email").val("c"+urlParams.get('fast_log_in')+"@c"+urlParams.get('fast_log_in'));
          $("#password").val("1");
          $("#log_in_btn").click();
        }
      }
      
      $("#sign_up_btn").click(function(){
        window.location ="sign-up"
      });
      $("#forgot_passsword_btn").click(function(){
        window.location ="forgot-password"
      });
      $("#showpasswordcheckbox").click(function(){
        const passwordInput = $("#password");
        const isChecked = $(this).prop("checked");
        passwordInput.prop("type", isChecked ? "text" : "password");
      });
    });
  </script>
</html>